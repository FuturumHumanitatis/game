/* === Reset & Base === */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #f0f4f8;
  color: #333;
  min-height: 100vh;
}

#app { max-width: 1000px; margin: 0 auto; padding: 16px; }

header { text-align: center; padding: 10px 0; }
header h1 { font-size: 1.7rem; color: #2d3748; }
header p  { color: #718096; margin-top: 4px; font-size: .95rem; }

/* === Screens === */
.screen { display: none; }
.screen.active { display: block; }

/* === Upload area === */
.upload-area {
  border: 3px dashed #a0aec0; border-radius: 16px;
  padding: 40px 20px; text-align: center;
  cursor: pointer; background: #fff;
  transition: border-color .2s, background .2s;
  margin-bottom: 20px;
}
.upload-area:hover,
.upload-area.drag-over { border-color: #4299e1; background: #ebf8ff; }
.upload-icon  { font-size: 3rem; margin-bottom: 8px; }
.upload-main  { font-size: 1.1rem; font-weight: 600; color: #2d3748; }
.upload-sub   { color: #718096; margin-top: 6px; font-size: .9rem; }
.upload-area input { display: none; }

/* === Settings === */
.settings {
  display: flex; gap: 16px; flex-wrap: wrap;
  justify-content: center; margin-bottom: 24px;
}
.setting-group {
  display: flex; align-items: center; gap: 8px;
  background: #fff; padding: 8px 14px; border-radius: 10px;
  box-shadow: 0 1px 4px rgba(0,0,0,.08);
}
.setting-group label { font-weight: 600; font-size: .9rem; color: #4a5568; white-space: nowrap; }
.setting-group input[type=range] { cursor: pointer; }
.val { min-width: 28px; text-align: center; font-weight: 700; color: #2d3748; }

/* === Sample cards === */
.samples-title { text-align: center; color: #4a5568; margin-bottom: 12px; font-size: 1.05rem; }
.samples-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 12px;
}
.sample-card {
  background: #fff; border-radius: 10px; padding: 8px;
  cursor: pointer; box-shadow: 0 1px 6px rgba(0,0,0,.08);
  transition: transform .15s, box-shadow .15s; text-align: center;
}
.sample-card:hover { transform: translateY(-3px); box-shadow: 0 4px 12px rgba(0,0,0,.14); }
.sample-card canvas { width: 100%; height: 100px; border-radius: 6px; display: block; }
.sample-card .label { margin-top: 6px; font-size: .85rem; font-weight: 600; color: #2d3748; }

/* === Buttons === */
.btn {
  padding: 8px 18px; border: none; border-radius: 8px;
  font-size: .95rem; cursor: pointer;
  background: #e2e8f0; color: #2d3748;
  transition: background .2s;
}
.btn:hover { background: #cbd5e0; }
.btn-primary { background: #4299e1; color: #fff; }
.btn-primary:hover { background: #3182ce; }

/* === Game toolbar === */
.game-toolbar {
  display: flex; align-items: center; gap: 10px;
  margin-bottom: 10px; flex-wrap: wrap;
}
.progress-text { font-weight: 700; min-width: 40px; color: #4a5568; }
.progress-bar {
  flex: 1; height: 12px; background: #e2e8f0;
  border-radius: 6px; overflow: hidden; min-width: 80px;
}
.progress-fill {
  height: 100%; border-radius: 6px;
  background: linear-gradient(90deg, #48bb78, #38a169);
  transition: width .3s; width: 0;
}

/* === Game area === */
.game-area { display: flex; gap: 12px; align-items: flex-start; }

.canvas-wrap {
  flex: 1; background: #fff; border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,.1);
  padding: 6px; overflow: auto; min-width: 0; position: relative;
}
.canvas-wrap canvas {
  display: block; width: 100%;
  image-rendering: pixelated; cursor: crosshair;
}
.canvas-wrap.zoomed canvas { width: auto; max-width: none; }

.zoom-controls {
  position: absolute; top: 10px; right: 10px;
  display: flex; gap: 4px; z-index: 2;
}
.zoom-btn {
  width: 32px; height: 32px; border: none; border-radius: 6px;
  background: rgba(255,255,255,.9); font-size: 1.1rem; cursor: pointer;
  box-shadow: 0 1px 4px rgba(0,0,0,.15);
  display: flex; align-items: center; justify-content: center;
}
.zoom-btn:hover { background: #fff; }

/* === Palette === */
.palette {
  display: flex; flex-direction: column; gap: 5px;
  min-width: 64px; max-height: 80vh; overflow-y: auto; padding-right: 4px;
}
.palette-item {
  display: flex; align-items: center; gap: 6px;
  padding: 5px 10px; border-radius: 8px; cursor: pointer;
  border: 3px solid transparent;
  transition: border-color .15s, transform .1s;
  background: #fff; box-shadow: 0 1px 3px rgba(0,0,0,.08);
}
.palette-item:hover { transform: scale(1.05); }
.palette-item.selected { border-color: #2d3748; box-shadow: 0 2px 8px rgba(0,0,0,.2); }
.swatch {
  width: 26px; height: 26px; border-radius: 50%;
  border: 2px solid rgba(0,0,0,.12); flex-shrink: 0;
}
.pnum { font-weight: 700; font-size: .92rem; color: #2d3748; }
.done-check { margin-left: auto; color: #38a169; font-weight: 700; }

/* === Completion === */
.completion {
  text-align: center; margin-top: 16px; padding: 18px;
  background: #f0fff4; border-radius: 12px;
  font-size: 1.2rem; font-weight: 600; color: #276749;
  display: flex; flex-direction: column; align-items: center; gap: 10px;
}
.completion.hidden { display: none; }

/* === Loading overlay === */
.loading-overlay {
  position: fixed; inset: 0;
  background: rgba(255,255,255,.85);
  display: flex; align-items: center; justify-content: center;
  z-index: 100; font-size: 1.2rem; font-weight: 600; color: #2d3748;
}
.loading-overlay.hidden { display: none; }
.spinner {
  width: 36px; height: 36px;
  border: 4px solid #e2e8f0; border-top-color: #4299e1;
  border-radius: 50%; animation: spin .7s linear infinite; margin-right: 12px;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* === Responsive === */
@media (max-width: 640px) {
  .game-area { flex-direction: column; }
  .palette { flex-direction: row; flex-wrap: wrap; justify-content: center; max-height: none; }
  header h1 { font-size: 1.3rem; }
}
